--- util.c.orig	Mon Apr 13 09:47:40 1998
+++ util.c	Thu Aug  9 16:46:00 2012
@@ -1,10 +1,12 @@
 #include <stdio.h>
+#include <stdlib.h>
 #include <sys/types.h>
 #include <fcntl.h>
 #include <sys/stat.h>
 #include <unistd.h>
 #include <errno.h>
 #include <pwd.h>
+#include <string.h>
 #include "newsfetch.h"
 
 extern int errno;
@@ -61,17 +63,17 @@ generateProcmailrc(char *homedir, char *rcfile, char *
 FILE *fp, *fp1, *fp2;
 char *tmp, buf[200], group[180], filterfile[100], procmailrcfile[100];
 int i,j;
-char *title="
+char *title="\n"
+"\n"
+"############### Generated by  Newsfetch ##############################\n"
+"# New version of Newsfetch is available from                         #\n"
+"#                                                                    #\n"
+"#        http://ulf.wep.net/newsfetch.html                           #\n"
+"# Feedback and Comments to Yusuf Motiwala <yusuf@scientist.com>      #\n"
+"######################################################################\n"
+"\n"
+"";								     
 
-############### Generated by  Newsfetch ##############################
-# New version of Newsfetch is available from                         #
-#                                                                    #
-#        http://ulf.wep.net/newsfetch.html                           #
-# Feedback and Comments to Yusuf Motiwala <yusuf@scientist.com>      #
-######################################################################
-
-";								     
-
        	strcpy(filterfile,homedir);
        	strcat(filterfile,"/");
        	strcat(filterfile, PROCMAIL_TMPL);
@@ -188,10 +190,7 @@ dest[0] = '\0';
 		tmp1 = tmp+strlen(search);
                 }
 	else
-		{
 		strcat(dest, tmp1);
-		return;
-		}
 	}
 }
 
