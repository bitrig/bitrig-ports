$OpenBSD: patch-deps_npm_node_modules_node-gyp_lib_build_js,v 1.2 2012/06/06 20:33:50 sthen Exp $
--- deps/npm/node_modules/node-gyp/lib/build.js.orig	Thu Jun 14 04:10:35 2012
+++ deps/npm/node_modules/node-gyp/lib/build.js	Thu Jun 14 04:14:19 2012
@@ -12,13 +12,17 @@ var fs = require('graceful-fs')
   , mkdirp = require('./util/mkdirp')
   , win = process.platform == 'win32'
   , openbsd = process.platform == 'openbsd'
+  , bitrig = process.platform == 'bitrig'
 
 exports.usage = 'Invokes `' + (win ? 'msbuild' : 'make') + '` and builds the module'
 
 function build (gyp, argv, callback) {
 
   gyp.verbose('build args', argv)
-  var makeCommand = openbsd ? 'gmake' : 'make'
+  var makeCommand = 'make'
+  if (openbsd || bitrig) {
+    makeCommand = 'gmake'
+  }
   var command = win ? 'msbuild' : makeCommand
     , buildDir = path.resolve('build')
     , configPath = path.resolve(buildDir, 'config.gypi')
@@ -184,6 +188,8 @@ function build (gyp, argv, callback) {
       argv.push('/p:Configuration=' + buildType + ';Platform=' + p)
     } else {
       argv.push('BUILDTYPE=' + buildType)
+      // Don't hide compiler commands
+      argv.push('V=1')
       // Invoke the Makefile in the 'build' dir.
       argv.push('-C')
       argv.push('build')
